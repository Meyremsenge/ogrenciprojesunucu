import{a as R,j as e}from"./query-CQKFQ3Lv.js";import{r as t,L as w}from"./vendor-izpyVFLd.js";import{c as d}from"./index-LWY5EKPO.js";import{a as O}from"./courseService-CXLj55ve.js";import{k as z,ah as D,ai as G,aj as P,R as Q,p as V,m as k,B as j,N as _,c as C,W as S,J as Y}from"./ui-xp2o30bu.js";import"./charts-Db6Lds24.js";import"./api-DJoBUiCV.js";const q=["Tümü","Web Geliştirme","Backend","Veri Bilimi","Mobil","DevOps","Tasarım"],L=[{value:"",label:"Tümü"},{value:"beginner",label:"Başlangıç"},{value:"intermediate",label:"Orta"},{value:"advanced",label:"İleri"}];function X(){const[x,T]=t.useState(""),[h,E]=t.useState("Tümü"),[g,M]=t.useState(""),[o,f]=t.useState("grid"),[c,i]=t.useState(1),[b,B]=t.useState("");t.useEffect(()=>{const s=setTimeout(()=>{B(x),i(1)},300);return()=>clearTimeout(s)},[x]);const N={page:c,per_page:12,...b&&{search:b},...h!=="Tümü"&&{category:h},...g&&{level:g}},{data:a,isLoading:l,isError:n,error:p,refetch:y}=R({queryKey:["courses",N],queryFn:()=>O(N),staleTime:5*60*1e3}),u=(a==null?void 0:a.items)||[],F=(a==null?void 0:a.total)||0,m=(a==null?void 0:a.pages)||1,v=t.useCallback(s=>{const r=L.find(K=>K.value===s);return(r==null?void 0:r.label)||s},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Kurslar"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Yeteneklerinizi geliştirmek için kurslara göz atın"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",value:x,onChange:s=>T(s.target.value),placeholder:"Kurs ara...",className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("select",{value:h,onChange:s=>{E(s.target.value),i(1)},className:"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:q.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("select",{value:g,onChange:s=>{M(s.target.value),i(1)},className:"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:L.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsxs("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>f("grid"),className:d("p-2 transition-colors",o==="grid"?"bg-primary text-primary-foreground":"hover:bg-muted"),children:e.jsx(G,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>f("list"),className:d("p-2 transition-colors",o==="list"?"bg-primary text-primary-foreground":"hover:bg-muted"),children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsx("button",{onClick:()=>y(),disabled:l,className:"p-2 rounded-lg border hover:bg-muted transition-colors disabled:opacity-50",children:e.jsx(Q,{className:d("h-5 w-5",l&&"animate-spin")})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[F," kurs bulundu"]}),l&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(V,{className:"h-8 w-8 animate-spin text-primary"})}),n&&e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-red-500 mb-4",children:["Hata: ",(p==null?void 0:p.message)||"Kurslar yüklenemedi"]}),e.jsx("button",{onClick:()=>y(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Tekrar Dene"})]}),!l&&!n&&o==="grid"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((s,r)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsxs(w,{to:`/courses/${s.id}`,className:"block card overflow-hidden hover:shadow-lg transition-shadow group",children:[e.jsx("div",{className:"h-40 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:s.thumbnail_url?e.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"w-full h-full object-cover"}):e.jsx(j,{className:"h-12 w-12 text-primary/40"})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.category&&e.jsx("span",{className:"badge badge-primary",children:s.category}),e.jsx("span",{className:"text-xs text-muted-foreground",children:v(s.level)})]}),e.jsx("h3",{className:"font-semibold line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.teacher_name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.total_duration>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),Math.round(s.total_duration/60)," saat"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"h-4 w-4"}),s.enrollment_count.toLocaleString()]}),s.average_rating>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 text-yellow-500"}),s.average_rating.toFixed(1)]})]}),e.jsxs("div",{className:"pt-3 border-t flex items-center justify-between",children:[e.jsx("span",{className:d("text-sm font-medium",s.is_published?"text-green-600":"text-yellow-600"),children:s.is_published?"Yayında":"Taslak"}),e.jsx(Y,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})]})]})]})},s.id))}),!l&&!n&&o==="list"&&e.jsx("div",{className:"space-y-4",children:u.map((s,r)=>e.jsx(k.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.05},children:e.jsx(w,{to:`/courses/${s.id}`,className:"block card p-4 hover:shadow-lg transition-shadow group",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-48 h-28 flex-shrink-0 bg-gradient-to-br from-primary/20 to-primary/5 rounded-lg flex items-center justify-center overflow-hidden",children:s.thumbnail_url?e.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"w-full h-full object-cover"}):e.jsx(j,{className:"h-8 w-8 text-primary/40"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.category&&e.jsx("span",{className:"badge badge-primary",children:s.category}),e.jsx("span",{className:"text-xs text-muted-foreground",children:v(s.level)})]}),e.jsx("h3",{className:"font-semibold group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:s.short_description||s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[e.jsx("span",{children:s.teacher_name}),s.total_duration>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),Math.round(s.total_duration/60)," saat"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"h-4 w-4"}),s.enrollment_count.toLocaleString()]}),s.average_rating>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 text-yellow-500"}),s.average_rating.toFixed(1)]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:d("text-sm font-medium",s.is_published?"text-green-600":"text-yellow-600"),children:s.is_published?"Yayında":"Taslak"})})]})})},s.id))}),!l&&!n&&u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Kurs bulunamadı"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Farklı filtreler deneyebilirsiniz."})]}),!l&&!n&&m>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(s=>Math.max(1,s-1)),disabled:c===1,className:"px-4 py-2 rounded-lg border hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Önceki"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Sayfa ",c," / ",m]}),e.jsx("button",{onClick:()=>i(s=>Math.min(m,s+1)),disabled:c===m,className:"px-4 py-2 rounded-lg border hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})]})}export{X as default};
