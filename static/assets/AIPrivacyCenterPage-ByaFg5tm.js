import{j as e}from"./query-CZD0ZRD-.js";import{r as i}from"./vendor-izpyVFLd.js";import{c as j}from"./index-CJixA8aD.js";import{l as I,m as A,n as z,o as P,p as k}from"./aiAdminService-v5FjVEwA.js";import{R as b,f as R,r as y,a5 as C,N as E,E as v,A as D,m as f,u as g,ac as _,at as U,af as w,I as K,y as N,q as V}from"./ui-CAO-iScS.js";import"./charts-Db6Lds24.js";import"./api-Tqb-OO70.js";function S({regulation:n,article:t,title:d,compliance:r,measures:c,endpoint:l}){const[m,x]=i.useState(!1);return e.jsxs("div",{className:j("p-4 rounded-lg border",r?"border-green-500/30 bg-green-500/5":"border-red-500/30 bg-red-500/5"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-muted",children:[n," ",t]}),r?e.jsx(g,{className:"h-4 w-4 text-green-500"}):e.jsx(_,{className:"h-4 w-4 text-red-500"})]}),e.jsx("h3",{className:"font-medium mt-2",children:d})]}),(c||l)&&e.jsx("button",{onClick:()=>x(!m),className:"text-sm text-primary hover:underline",children:m?"Gizle":"Detay"})]}),e.jsx(D,{children:m&&e.jsxs(f.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-3 pt-3 border-t overflow-hidden",children:[c&&e.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground",children:c.map((o,p)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),o]},p))}),l&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[e.jsx("span",{className:"font-medium",children:"Endpoint:"})," ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-xs",children:l})]})]})})]})}function L({onDelete:n}){const[t,d]=i.useState(""),[r,c]=i.useState(""),[l,m]=i.useState(!1),[x,o]=i.useState(null),[p,h]=i.useState(null),a=async()=>{if(!t||!r||r.length<10){h("Kullanıcı ID ve en az 10 karakterlik neden gereklidir.");return}if(confirm(`${t} ID'li kullanıcının TÜM AI verilerini silmek istediğinize emin misiniz? Bu işlem geri alınamaz!`)){m(!0),h(null),o(null);try{const s=await n(Number(t),r);o(s),d(""),c("")}catch(s){h(s.message||"Silme işlemi başarısız")}finally{m(!1)}}};return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 text-red-500",children:e.jsx(U,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Veri Silme (Unutulma Hakkı)"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"KVKK Madde 7 / GDPR Article 17 kapsamında kullanıcı verilerini silin"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kullanıcı ID"}),e.jsx("input",{type:"number",value:t,onChange:s=>d(s.target.value),placeholder:"Örn: 12345",className:"w-full px-4 py-2 rounded-lg border bg-background"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Silme Nedeni ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r,onChange:s=>c(s.target.value),placeholder:"KVKK/GDPR kapsamında kullanıcı talebi...",className:"w-full px-4 py-2 rounded-lg border bg-background",minLength:10}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"En az 10 karakter (KVKK/GDPR uyumluluk için)"})]})]}),p&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-center gap-2 text-sm text-red-500",children:[e.jsx(y,{className:"h-4 w-4"}),p]}),x&&e.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/30",children:[e.jsxs("p",{className:"font-medium text-green-600 flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Silme işlemi tamamlandı"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Silinen Log"}),e.jsx("p",{className:"font-medium",children:x.logs_deleted})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Kota Silindi"}),e.jsx("p",{className:"font-medium",children:x.quota_deleted?"Evet":"Hayır"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Silinen İhlal"}),e.jsx("p",{className:"font-medium",children:x.violations_deleted})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"KVKK/GDPR"}),e.jsx("p",{className:"font-medium text-green-500",children:"Uyumlu ✓"})]})]})]}),e.jsx("button",{onClick:a,disabled:l||!t||r.length<10,className:j("px-6 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",(l||!t||r.length<10)&&"opacity-50 cursor-not-allowed"),children:l?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 animate-spin"}),"Siliniyor..."]}):"Verileri Sil"})]})]})}function G({onExport:n}){const[t,d]=i.useState(""),[r,c]=i.useState(!1),[l,m]=i.useState(null),[x,o]=i.useState(null),p=async()=>{if(!t){o("Kullanıcı ID gereklidir.");return}c(!0),o(null),m(null);try{const a=await n(Number(t));m(a)}catch(a){o(a.message||"Dışa aktarma başarısız")}finally{c(!1)}},h=()=>{if(!l)return;const a=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),u=document.createElement("a");u.href=s,u.download=`ai_data_export_user_${l.user_id}_${new Date().toISOString().split("T")[0]}.json`,u.click(),URL.revokeObjectURL(s)};return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10 text-blue-500",children:e.jsx(w,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Veri Dışa Aktarma (Taşınabilirlik)"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"GDPR Article 20 kapsamında kullanıcı verilerini JSON formatında dışa aktarın"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kullanıcı ID"}),e.jsx("input",{type:"number",value:t,onChange:a=>d(a.target.value),placeholder:"Örn: 12345",className:"w-full px-4 py-2 rounded-lg border bg-background"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:p,disabled:r||!t,className:j("px-6 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors",(r||!t)&&"opacity-50 cursor-not-allowed"),children:r?e.jsx(b,{className:"h-4 w-4 animate-spin"}):"Verileri Getir"})})]}),x&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-center gap-2 text-sm text-red-500",children:[e.jsx(y,{className:"h-4 w-4"}),x]}),l&&e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Kullanıcı #",l.user_id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.metadata.total_records," kayıt bulundu"]})]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(w,{className:"h-4 w-4"}),"JSON İndir"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-background",children:[e.jsx("p",{className:"text-muted-foreground",children:"Kullanım Logları"}),e.jsx("p",{className:"text-2xl font-bold",children:l.data.usage_logs.length})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-background",children:[e.jsx("p",{className:"text-muted-foreground",children:"Kota Geçmişi"}),e.jsx("p",{className:"text-2xl font-bold",children:l.data.quota_history.length})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-background",children:[e.jsx("p",{className:"text-muted-foreground",children:"İhlaller"}),e.jsx("p",{className:"text-2xl font-bold",children:l.data.violations.length})]})]}),e.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30 text-sm",children:[e.jsxs("p",{className:"font-medium text-yellow-600 flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Önemli Not"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:l.metadata.note})]})]})]})]})}function T({onApply:n}){const[t,d]=i.useState(!1),[r,c]=i.useState(null),[l,m]=i.useState(null),x=async()=>{if(confirm("Veri saklama politikasını manuel olarak uygulamak istediğinize emin misiniz? Bu işlem eski verileri silecektir.")){d(!0),m(null),c(null);try{const o=await n();c(o)}catch(o){m(o.message||"İşlem başarısız")}finally{d(!1)}}};return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-purple-500/10 text-purple-500",children:e.jsx(N,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Veri Saklama Politikası"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"KVKK/GDPR kapsamında otomatik veri temizleme kuralları"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsx(N,{className:"h-5 w-5 text-muted-foreground mb-2"}),e.jsx("p",{className:"font-medium",children:"Normal Loglar"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:"30 gün"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sonra otomatik silinir"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsx(N,{className:"h-5 w-5 text-muted-foreground mb-2"}),e.jsx("p",{className:"font-medium",children:"Hata Logları"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:"90 gün"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Debug için uzun süre"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsx(N,{className:"h-5 w-5 text-muted-foreground mb-2"}),e.jsx("p",{className:"font-medium",children:"Çözülen İhlaller"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:"365 gün"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Güvenlik kaydı için"})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30 flex items-start gap-2 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-muted-foreground",children:"Bu politika normalde Celery task ile günlük otomatik çalışır. Manuel çalıştırma sadece acil durumlarda gereklidir."})]}),l&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-center gap-2 text-sm text-red-500",children:[e.jsx(y,{className:"h-4 w-4"}),l]}),r&&e.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/30",children:[e.jsxs("p",{className:"font-medium text-green-600 flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Politika başarıyla uygulandı"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Silinen Log"}),e.jsx("p",{className:"font-medium",children:r.logs_deleted})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Silinen Hata Log"}),e.jsx("p",{className:"font-medium",children:r.error_logs_deleted})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Silinen İhlal"}),e.jsx("p",{className:"font-medium",children:r.violations_deleted})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Temizlenen Alan"}),e.jsxs("p",{className:"font-medium",children:[r.space_freed_mb.toFixed(2)," MB"]})]})]})]}),e.jsx("button",{onClick:x,disabled:t,className:j("px-6 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 transition-colors",t&&"opacity-50 cursor-not-allowed"),children:t?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 animate-spin"}),"Uygulanıyor..."]}):"Politikayı Uygula"})]})]})}function O({demo:n,onFetch:t}){const[d,r]=i.useState("12345"),[c,l]=i.useState("192.168.1.100");return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10 text-green-500",children:e.jsx(v,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Anonimleştirme Demo"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Verilerin nasıl anonimleştirildiğini görün"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"number",value:d,onChange:m=>r(m.target.value),placeholder:"User ID",className:"flex-1 px-4 py-2 rounded-lg border bg-background"}),e.jsx("input",{type:"text",value:c,onChange:m=>l(m.target.value),placeholder:"IP Adresi",className:"flex-1 px-4 py-2 rounded-lg border bg-background"}),e.jsx("button",{onClick:()=>t(Number(d),c),className:"px-4 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600",children:"Test Et"})]}),n&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2 text-red-600",children:[e.jsx(V,{className:"h-4 w-4"}),"Orijinal (Kaydedilmez)"]}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm font-mono",children:[e.jsxs("p",{children:["User ID: ",n.original.user_id]}),e.jsxs("p",{children:["IP: ",n.original.ip_address]}),e.jsxs("p",{children:["Zaman: ",new Date(n.original.timestamp).toISOString()]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/30",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2 text-green-600",children:[e.jsx(v,{className:"h-4 w-4"}),"Anonimleştirilmiş (Kaydedilir)"]}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[e.jsxs("p",{className:"truncate",children:[e.jsx("span",{className:"text-muted-foreground",children:"Günlük Hash:"})," ",e.jsx("code",{className:"text-xs",children:n.anonymized.user_id_daily_hash})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Maskelenmiş IP:"})," ",e.jsx("code",{children:n.anonymized.masked_ip})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Saat Yuvarlanmış:"})," ",e.jsx("code",{children:n.anonymized.truncated_time_hour})]})]})]})]}),n&&e.jsxs("div",{className:"p-3 rounded-lg bg-muted text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium mb-1",children:"Açıklama:"}),e.jsx("p",{children:n.explanation.tr})]})]})]})}function X(){const[n,t]=i.useState(!0),[d,r]=i.useState(null),[c,l]=i.useState(null),[m,x]=i.useState(null),[o,p]=i.useState("compliance");i.useEffect(()=>{(async()=>{try{t(!0);const[s,u]=await Promise.all([P(),k()]);r(s),l(u)}catch(s){x(s.message)}finally{t(!1)}})()},[]);const h=async(a,s)=>{try{const u=await k({user_id:a,ip:s});l(u)}catch(u){x(u.message)}};return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(b,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(R,{className:"h-7 w-7 text-primary"}),"AI Gizlilik Merkezi"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"KVKK/GDPR uyumlu AI veri yönetimi (Sadece Süper Admin)"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600",children:"Dikkat: Kritik Operasyonlar"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Bu sayfadaki işlemler geri alınamaz. Veri silme işlemleri kalıcıdır. Tüm işlemler audit log'a kaydedilir."})]})]}),e.jsx("div",{className:"flex gap-2 border-b",children:[{key:"compliance",label:"Uyumluluk",icon:C},{key:"operations",label:"Veri İşlemleri",icon:E},{key:"demo",label:"Anonimleştirme",icon:v}].map(a=>e.jsxs("button",{onClick:()=>p(a.key),className:j("flex items-center gap-2 px-4 py-3 border-b-2 transition-colors",o===a.key?"border-primary text-primary font-medium":"border-transparent text-muted-foreground hover:text-foreground"),children:[e.jsx(a.icon,{className:"h-4 w-4"}),a.label]},a.key))}),e.jsxs(D,{mode:"wait",children:[o==="compliance"&&d&&e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"KVKK Uyumluluk"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(d.kvkk_compliance).map(([a,s])=>e.jsx(S,{regulation:"KVKK",article:a.replace("article_","Madde "),title:s.title,compliance:s.compliance,measures:s.measures,endpoint:s.endpoint},a))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"GDPR Uyumluluk"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(d.gdpr_compliance).map(([a,s])=>e.jsx(S,{regulation:"GDPR",article:a.replace("article_","Article "),title:s.title,compliance:s.compliance,measures:s.measures,endpoint:s.endpoint},a))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-green-500"}),"Kaydedilen Veriler"]}),e.jsx("ul",{className:"space-y-2",children:d.what_is_logged.map((a,s)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:"•"}),a]},s))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-red-500"}),"Kaydedilmeyen Veriler"]}),e.jsx("ul",{className:"space-y-2",children:d.what_is_NOT_logged.map((a,s)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-0.5",children:"•"}),a]},s))})]})]})]},"compliance"),o==="operations"&&e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:[e.jsx(L,{onDelete:(a,s)=>I(a,{user_id:a,reason:s})}),e.jsx(G,{onExport:A}),e.jsx(T,{onApply:z})]},"operations"),o==="demo"&&e.jsx(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:e.jsx(O,{demo:c,onFetch:h})},"demo")]})]})}export{X as default};
