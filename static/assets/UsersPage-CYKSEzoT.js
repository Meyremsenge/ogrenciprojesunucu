import{u as Ee,a as Me,b as y,j as e}from"./query-CQKFQ3Lv.js";import{r as n}from"./vendor-izpyVFLd.js";import{c as p}from"./index-LWY5EKPO.js";import{a as h}from"./api-DJoBUiCV.js";import{p as B,t as G,Z as ze,k as Te,ah as $e,a6 as De,ae as Fe,m as u,ao as Re,al as qe,w as Qe,a_ as le,a0 as ne,am as Le,A as E,X as O,aU as re,x as ie,E as Be,q as Ge,v as Oe}from"./ui-xp2o30bu.js";import"./charts-Db6Lds24.js";const g="/admin",Ye=async t=>(await h.get(`${g}/users`,{params:t})).data,Xe=async t=>{console.log("Creating user with data:",t);const r=await h.post(`${g}/users`,t);return console.log("Create user response:",r),r.data.data.user},Ve=async(t,r)=>(await h.put(`${g}/users/${t}`,r)).data.data.user,Ze=async(t,r=!1)=>{await h.delete(`${g}/users/${t}`,{params:{hard:r}})},He=async t=>(await h.post(`${g}/users/${t}/activate`)).data.data.user,Je=async t=>(await h.post(`${g}/users/${t}/deactivate`)).data.data.user,We=async(t,r)=>(await h.post(`${g}/users/${t}/reset-password`,{new_password:r})).data.data,Ie=async t=>(await h.post(`${g}/users/bulk`,t)).data.data,es=[{key:"all",label:"Tüm Roller"},{key:"student",label:"Öğrenci"},{key:"teacher",label:"Öğretmen"},{key:"admin",label:"Admin"}],ss=[{key:"all",label:"Tüm Durumlar"},{key:"active",label:"Aktif"},{key:"inactive",label:"Pasif"},{key:"pending",label:"Beklemede"}];function ds(){var I,ee;const t=Ee(),[r,M]=n.useState(""),[C,ce]=n.useState("all"),[_,oe]=n.useState("all"),[m,A]=n.useState([]),[k,Y]=n.useState(1),[z,f]=n.useState(null),[U,T]=n.useState(null),[de,w]=n.useState(!1),[me,S]=n.useState(!1),[ue,$]=n.useState(!1),[D,xe]=n.useState(!1),[o,b]=n.useState(null),[F,R]=n.useState(null),[i,j]=n.useState({email:"",first_name:"",last_name:"",password:"",role:"student"}),l=n.useCallback((s,a)=>{T({type:s,message:a}),setTimeout(()=>T(null),4e3)},[]),{data:q,isLoading:pe,error:he}=Me({queryKey:["adminUsers",{page:k,role:C,status:_,search:r}],queryFn:()=>Ye({page:k,per_page:20,role:C!=="all"?C:void 0,is_active:_==="active"?!0:_==="inactive"?!1:void 0,search:r||void 0})}),X=y({mutationFn:s=>He(s),onSuccess:()=>{t.invalidateQueries({queryKey:["adminUsers"]}),l("success","Kullanıcı aktifleştirildi")},onError:()=>{l("error","Kullanıcı aktifleştirilirken hata oluştu")}}),V=y({mutationFn:s=>Je(s),onSuccess:()=>{t.invalidateQueries({queryKey:["adminUsers"]}),l("success","Kullanıcı deaktifleştirildi")},onError:()=>{l("error","Kullanıcı deaktifleştirilirken hata oluştu")}}),Z=y({mutationFn:s=>Ze(s),onSuccess:()=>{t.invalidateQueries({queryKey:["adminUsers"]}),l("success","Kullanıcı silindi")},onError:()=>{l("error","Kullanıcı silinirken hata oluştu")}}),K=y({mutationFn:Xe,onSuccess:()=>{t.invalidateQueries({queryKey:["adminUsers"]}),w(!1),j({email:"",first_name:"",last_name:"",password:"",role:"student"}),l("success","Kullanıcı başarıyla oluşturuldu")},onError:s=>{var x,N,se,ae;const a=(x=s==null?void 0:s.response)==null?void 0:x.data;let c="Kullanıcı oluşturulurken hata oluştu";if((se=(N=a==null?void 0:a.error)==null?void 0:N.details)!=null&&se.errors){const Pe=a.error.details.errors;c=Object.entries(Pe).map(([te,L])=>`${{password:"Şifre",email:"E-posta",first_name:"Ad",last_name:"Soyad"}[te]||te}: ${Array.isArray(L)?L.join(", "):L}`).join(". ")||c}else(ae=a==null?void 0:a.error)!=null&&ae.message?c=a.error.message:a!=null&&a.message&&(c=a.message);l("error",c)}}),Q=y({mutationFn:({userId:s,data:a})=>Ve(s,a),onSuccess:()=>{t.invalidateQueries({queryKey:["adminUsers"]}),S(!1),b(null),l("success","Kullanıcı başarıyla güncellendi")},onError:s=>{var c,x;const a=((x=(c=s==null?void 0:s.response)==null?void 0:c.data)==null?void 0:x.message)||"Kullanıcı güncellenirken hata oluştu";l("error",a)}}),H=y({mutationFn:s=>We(s),onSuccess:s=>{R(s.temporary_password),$(!0)},onError:()=>{l("error","Şifre sıfırlanırken hata oluştu")}}),P=y({mutationFn:s=>Ie(s),onSuccess:(s,a)=>{t.invalidateQueries({queryKey:["adminUsers"]}),A([]),l("success",{activate:"Kullanıcılar aktifleştirildi",deactivate:"Kullanıcılar deaktifleştirildi",delete:"Kullanıcılar silindi",change_role:"Kullanıcı rolleri değiştirildi"}[a.action])},onError:()=>{l("error","Toplu işlem sırasında hata oluştu")}}),J=n.useMemo(()=>{var a;const s=q;return Array.isArray(s==null?void 0:s.data)?s.data:((a=s==null?void 0:s.data)==null?void 0:a.users)||(s==null?void 0:s.users)||[]},[q]),d=q,ge=((I=d==null?void 0:d.pagination)==null?void 0:I.total)||(d==null?void 0:d.total)||J.length,W=((ee=d==null?void 0:d.pagination)==null?void 0:ee.pages)||(d==null?void 0:d.pages)||1,v=J,fe=s=>{switch(s){case"admin":case"super_admin":return e.jsx("span",{className:"badge bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",children:"Admin"});case"teacher":return e.jsx("span",{className:"badge bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:"Öğretmen"});case"student":return e.jsx("span",{className:"badge bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:"Öğrenci"});default:return e.jsx("span",{className:"badge",children:s})}},be=s=>s.is_verified?s.is_active?e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(ne,{className:"h-4 w-4"})," Aktif"]}):e.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(le,{className:"h-4 w-4"})," Pasif"]}):e.jsxs("span",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(Oe,{className:"h-4 w-4"})," Beklemede"]}),ye=s=>{A(a=>a.includes(s)?a.filter(c=>c!==s):[...a,s])},je=()=>{m.length===v.length?A([]):A(v.map(s=>s.id))},ve=async s=>{await X.mutateAsync(s)},Ne=async s=>{await V.mutateAsync(s)},ke=async s=>{confirm("Bu kullanıcıyı silmek istediğinize emin misiniz?")&&await Z.mutateAsync(s)},we=async s=>{await H.mutateAsync(s)},Se=async()=>{confirm(`${m.length} kullanıcıyı deaktive etmek istediğinize emin misiniz?`)&&await P.mutateAsync({action:"deactivate",user_ids:m})},Ce=async()=>{confirm(`${m.length} kullanıcıyı silmek istediğinize emin misiniz?`)&&await P.mutateAsync({action:"delete",user_ids:m})},_e=async()=>{if(!i.email||!i.first_name||!i.last_name||!i.password){l("error","Tüm zorunlu alanları doldurun");return}if(i.password.length<8){l("error","Şifre en az 8 karakter olmalıdır");return}if(!i.email.includes("@")){l("error","Geçerli bir e-posta adresi girin");return}await K.mutateAsync(i)},Ae=s=>{b(s),S(!0),f(null)},Ue=async()=>{o&&await Q.mutateAsync({userId:o.id,data:{email:o.email,first_name:o.first_name,last_name:o.last_name,role:o.role,is_active:o.is_active}})},Ke=n.useCallback(()=>{f(null)},[]);return pe?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Kullanıcılar yükleniyor..."})]})}):he?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"h-8 w-8 text-destructive mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Kullanıcılar yüklenirken hata oluştu"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Kullanıcı Yönetimi"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Sisteme kayıtlı tüm kullanıcıları yönetin"})]}),e.jsxs("button",{onClick:()=>w(!0),className:p("flex items-center gap-2 px-4 py-2 rounded-lg font-medium","bg-primary text-primary-foreground hover:bg-primary/90 transition-colors"),children:[e.jsx(ze,{className:"h-4 w-4"}),"Yeni Kullanıcı"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",value:r,onChange:s=>M(s.target.value),placeholder:"İsim veya e-posta ara...",className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("select",{value:C,onChange:s=>ce(s.target.value),className:"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:es.map(s=>e.jsx("option",{value:s.key,children:s.label},s.key))})]}),e.jsx("select",{value:_,onChange:s=>oe(s.target.value),className:"px-3 py-2 rounded-lg border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:ss.map(s=>e.jsx("option",{value:s.key,children:s.label},s.key))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:p("flex items-center gap-2 px-3 py-2 rounded-lg text-sm","border hover:bg-muted transition-colors"),children:[e.jsx(De,{className:"h-4 w-4"}),"Dışa Aktar"]}),e.jsxs("button",{className:p("flex items-center gap-2 px-3 py-2 rounded-lg text-sm","border hover:bg-muted transition-colors"),children:[e.jsx(Fe,{className:"h-4 w-4"}),"İçe Aktar"]})]})]}),m.length>0&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-4 p-3 bg-primary/10 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium",children:[m.length," kullanıcı seçildi"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm rounded hover:bg-primary/20",onClick:Se,disabled:P.isPending,children:"Deaktive Et"}),e.jsx("button",{className:"px-3 py-1 text-sm rounded hover:bg-primary/20",children:"E-posta Gönder"}),e.jsx("button",{className:"px-3 py-1 text-sm text-destructive rounded hover:bg-destructive/10",onClick:Ce,disabled:P.isPending,children:"Sil"})]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-cell w-10",children:e.jsx("input",{type:"checkbox",checked:m.length===v.length&&v.length>0,onChange:je,className:"rounded"})}),e.jsx("th",{className:"table-cell text-left",children:"Kullanıcı"}),e.jsx("th",{className:"table-cell text-left",children:"Rol"}),e.jsx("th",{className:"table-cell text-left",children:"Durum"}),e.jsx("th",{className:"table-cell text-left",children:"Kayıt Tarihi"}),e.jsx("th",{className:"table-cell text-left",children:"Son Giriş"}),e.jsx("th",{className:"table-cell w-10"})]})}),e.jsx("tbody",{children:v.map((s,a)=>{var c,x;return e.jsxs(u.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.02},className:"table-row",children:[e.jsx("td",{className:"table-cell",children:e.jsx("input",{type:"checkbox",checked:m.includes(s.id),onChange:()=>ye(s.id),className:"rounded"})}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-primary",children:[((c=s.first_name)==null?void 0:c[0])||"",((x=s.last_name)==null?void 0:x[0])||""]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]})}),e.jsx("td",{className:"table-cell",children:fe(s.role)}),e.jsx("td",{className:"table-cell text-sm",children:be(s)}),e.jsx("td",{className:"table-cell text-sm text-muted-foreground",children:s.created_at?new Date(s.created_at).toLocaleDateString("tr-TR"):"-"}),e.jsx("td",{className:"table-cell text-sm text-muted-foreground",children:s.last_login_at?new Date(s.last_login_at).toLocaleDateString("tr-TR"):"-"}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"p-1 hover:bg-muted rounded",onClick:N=>{N.stopPropagation(),f(z===s.id?null:s.id)},children:e.jsx(Re,{className:"h-4 w-4 text-muted-foreground"})}),z===s.id&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-44 bg-background border rounded-lg shadow-lg z-20",onClick:N=>N.stopPropagation(),children:[e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted",onClick:()=>Ae(s),children:[e.jsx(qe,{className:"h-4 w-4"})," Düzenle"]}),e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted",onClick:()=>{we(s.id),f(null)},disabled:H.isPending,children:[e.jsx(Qe,{className:"h-4 w-4"})," Şifre Sıfırla"]}),s.is_active?e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted",onClick:()=>{Ne(s.id),f(null)},disabled:V.isPending,children:[e.jsx(le,{className:"h-4 w-4"})," Deaktive Et"]}):e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted",onClick:()=>{ve(s.id),f(null)},disabled:X.isPending,children:[e.jsx(ne,{className:"h-4 w-4"})," Aktive Et"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-destructive hover:bg-destructive/10",onClick:()=>{ke(s.id),f(null)},disabled:Z.isPending,children:[e.jsx(Le,{className:"h-4 w-4"})," Sil"]})]})]})})]},s.id)})})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Toplam ",ge," kullanıcıdan ",v.length," tanesi gösteriliyor"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm border rounded hover:bg-muted disabled:opacity-50",disabled:k===1,onClick:()=>Y(s=>Math.max(1,s-1)),children:"Önceki"}),e.jsxs("span",{className:"px-3 py-1 text-sm",children:["Sayfa ",k," / ",W]}),e.jsx("button",{className:"px-3 py-1 text-sm border rounded hover:bg-muted disabled:opacity-50",disabled:k>=W,onClick:()=>Y(s=>s+1),children:"Sonraki"})]})]})]}),e.jsx(E,{children:de&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:e.jsx(u.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-background rounded-xl shadow-xl w-full max-w-md border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Yeni Kullanıcı Ekle"}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-muted rounded-lg",children:e.jsx(O,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ad *"}),e.jsx("input",{type:"text",value:i.first_name,onChange:s=>j(a=>({...a,first_name:s.target.value})),placeholder:"Ad",className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Soyad *"}),e.jsx("input",{type:"text",value:i.last_name,onChange:s=>j(a=>({...a,last_name:s.target.value})),placeholder:"Soyad",className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:i.email,onChange:s=>j(a=>({...a,email:s.target.value})),placeholder:"kullanici@email.com",className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Şifre *"}),e.jsx("input",{type:"password",value:i.password,onChange:s=>j(a=>({...a,password:s.target.value})),placeholder:"En az 8 karakter",minLength:8,className:p("w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",i.password&&i.password.length<8&&"border-destructive")}),i.password&&i.password.length<8&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"Şifre en az 8 karakter olmalıdır"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rol"}),e.jsxs("select",{value:i.role,onChange:s=>j(a=>({...a,role:s.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"student",children:"Öğrenci"}),e.jsx("option",{value:"teacher",children:"Öğretmen"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border rounded-lg hover:bg-muted transition-colors",children:"İptal"}),e.jsx("button",{onClick:_e,disabled:K.isPending,className:p("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium","bg-primary text-primary-foreground hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:K.isPending?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4"}),"Kaydet"]})})]}),K.isError&&e.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive",children:[e.jsx(G,{className:"h-4 w-4 inline mr-2"}),"Kullanıcı oluşturulurken hata oluştu. Lütfen tekrar deneyin."]})]})})})}),e.jsx(E,{children:me&&o&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>S(!1),children:e.jsx(u.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-background rounded-xl shadow-xl w-full max-w-md border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Kullanıcı Düzenle"}),e.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-muted rounded-lg",children:e.jsx(O,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ad"}),e.jsx("input",{type:"text",value:o.first_name,onChange:s=>b(a=>a?{...a,first_name:s.target.value}:null),placeholder:"Ad",className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Soyad"}),e.jsx("input",{type:"text",value:o.last_name,onChange:s=>b(a=>a?{...a,last_name:s.target.value}:null),placeholder:"Soyad",className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:o.email,onChange:s=>b(a=>a?{...a,email:s.target.value}:null),placeholder:"kullanici@email.com",className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rol"}),e.jsxs("select",{value:o.role,onChange:s=>b(a=>a?{...a,role:s.target.value}:null),className:"w-full px-3 py-2 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"student",children:"Öğrenci"}),e.jsx("option",{value:"teacher",children:"Öğretmen"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"edit-is-active",checked:o.is_active,onChange:s=>b(a=>a?{...a,is_active:s.target.checked}:null),className:"rounded"}),e.jsx("label",{htmlFor:"edit-is-active",className:"text-sm font-medium",children:"Aktif"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t",children:[e.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2 border rounded-lg hover:bg-muted transition-colors",children:"İptal"}),e.jsx("button",{onClick:Ue,disabled:Q.isPending,className:p("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium","bg-primary text-primary-foreground hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:Q.isPending?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 animate-spin"}),"Güncelleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4"}),"Güncelle"]})})]})]})})})}),e.jsx(E,{children:ue&&F&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>{$(!1),R(null)},children:e.jsx(u.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-background rounded-xl shadow-xl w-full max-w-sm border",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"h-6 w-6 text-green-600"})})}),e.jsx("h2",{className:"text-xl font-semibold text-center mb-2",children:"Şifre Sıfırlandı"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Kullanıcının yeni geçici şifresi:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:D?"text":"password",value:F,readOnly:!0,className:"w-full px-3 py-3 border rounded-lg bg-muted text-center font-mono text-lg"}),e.jsx("button",{onClick:()=>xe(!D),className:"absolute right-3 top-1/2 -translate-y-1/2",children:D?e.jsx(Be,{className:"h-5 w-5"}):e.jsx(Ge,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2 mb-4",children:"Kullanıcı ilk girişte şifresini değiştirmek zorunda olacak."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(F),l("success","Şifre panoya kopyalandı")},className:"flex-1 px-4 py-2 border rounded-lg hover:bg-muted transition-colors",children:"Kopyala"}),e.jsx("button",{onClick:()=>{$(!1),R(null)},className:p("flex-1 px-4 py-2 rounded-lg font-medium","bg-primary text-primary-foreground hover:bg-primary/90 transition-colors"),children:"Tamam"})]})]})})})}),e.jsx(E,{children:U&&e.jsxs(u.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:p("fixed bottom-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",U.type==="success"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-destructive/10 text-destructive border border-destructive/20"),children:[U.type==="success"?e.jsx(ie,{className:"h-5 w-5"}):e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{children:U.message}),e.jsx("button",{onClick:()=>T(null),className:"ml-2",children:e.jsx(O,{className:"h-4 w-4"})})]})}),z!==null&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:Ke})]})}export{ds as default};
