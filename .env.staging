# ==============================================
# STAGING ENVIRONMENT CONFIGURATION
# ==============================================
# Pre-production test ortamı yapılandırması.
# Production'a yakın ancak test verileriyle.
# ==============================================

# ------------------------------------------
# APPLICATION
# ------------------------------------------
FLASK_ENV=staging
FLASK_DEBUG=false
FLASK_HOST=0.0.0.0
FLASK_PORT=5000

APP_NAME="Öğrenci Koçluk Sistemi (Staging)"
APP_VERSION=1.0.0-staging
APP_URL=https://staging.ogrencikoçluk.com
FRONTEND_URL=https://staging-app.ogrencikoçluk.com

# ------------------------------------------
# SECURITY
# ------------------------------------------
# IMPORTANT: Bu değerleri deployment sırasında değiştirin!
SECRET_KEY=${SECRET_KEY}
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ACCESS_TOKEN_EXPIRES=1800
JWT_REFRESH_TOKEN_EXPIRES=604800

# CSRF
WTF_CSRF_ENABLED=true
WTF_CSRF_TIME_LIMIT=3600

# Session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# Password Hashing
BCRYPT_LOG_ROUNDS=12

# ------------------------------------------
# CORS
# ------------------------------------------
ALLOWED_ORIGINS=https://staging-app.ogrencikoçluk.com

# ------------------------------------------
# DATABASE - PostgreSQL (Staging Instance)
# ------------------------------------------
DATABASE_URL=${DATABASE_URL}
DB_HOST=staging-db.internal
DB_PORT=5432
DB_NAME=student_coaching_staging
DB_USER=app_staging
DB_PASSWORD=${DB_PASSWORD}
DB_SCHEMA=public

# Pool (Medium size)
DB_POOL_SIZE=5
DB_POOL_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800
DB_POOL_PRE_PING=true

# SQLAlchemy
SQLALCHEMY_ECHO=false
SQLALCHEMY_TRACK_MODIFICATIONS=false
SQLALCHEMY_RECORD_QUERIES=false

# ------------------------------------------
# REDIS (Staging Instance)
# ------------------------------------------
REDIS_URL=${REDIS_URL}
REDIS_HOST=staging-redis.internal
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_SSL=false

# Cache
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=sks_staging:

# Redis Pool
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ------------------------------------------
# CELERY
# ------------------------------------------
CELERY_BROKER_URL=${CELERY_BROKER_URL}
CELERY_RESULT_BACKEND=${CELERY_RESULT_BACKEND}
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_TIME_LIMIT=300

# ------------------------------------------
# EMAIL (SES or SMTP)
# ------------------------------------------
MAIL_SERVER=${MAIL_SERVER}
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=${MAIL_USERNAME}
MAIL_PASSWORD=${MAIL_PASSWORD}
MAIL_DEFAULT_SENDER=staging@ogrencikoçluk.com
MAIL_SUPPRESS_SEND=false

# ------------------------------------------
# FILE STORAGE (S3 or Local)
# ------------------------------------------
STORAGE_TYPE=s3
UPLOAD_FOLDER=uploads
MAX_CONTENT_LENGTH=16777216

AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET=sks-staging-uploads
AWS_S3_REGION=eu-central-1

# ------------------------------------------
# RATE LIMITING
# ------------------------------------------
RATELIMIT_ENABLED=true
RATELIMIT_DEFAULT=500/minute
RATELIMIT_STORAGE_URL=${REDIS_URL}

# ------------------------------------------
# LOGGING
# ------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=/var/log/sks/staging.log

# ------------------------------------------
# MONITORING
# ------------------------------------------
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.5

# ------------------------------------------
# EXTERNAL SERVICES
# ------------------------------------------
YOUTUBE_API_KEY=${YOUTUBE_API_KEY}
ZOOM_API_KEY=${ZOOM_API_KEY}
ZOOM_API_SECRET=${ZOOM_API_SECRET}
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

# ------------------------------------------
# PAGINATION
# ------------------------------------------
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100
